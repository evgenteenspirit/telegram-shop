<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–µ–≥–∞–¥–∞—Ä - –ú–∞–≥–∞–∑–∏–Ω –º–µ–±–µ–ª—å–Ω–æ–π —Ñ—É—Ä–Ω–∏—Ç—É—Ä—ã –≤ –ü—è—Ç–∏–≥–æ—Ä—Å–∫–µ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <style>
        /* ... –≤–∞—à CSS –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... */
        /* –û—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ, –≤–∫–ª—é—á–∞—è —Å—Ç–∏–ª–∏ –∫–∞—Ä—É—Å–µ–ª–∏, –º–æ–¥–∞–ª–∫–∏ –∏ —Ç.–¥. */
    </style>
</head>
<body>
    <!-- ... –í–°–Å –¢–ï–õ–û HTML –ë–ï–ó –ò–ó–ú–ï–ù–ï–ù–ò–ô ... -->
    <!-- –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ: –£–î–ê–õ–ï–ù–´ –í–°–ï onclick –∏–∑ HTML -->
    
    <!-- –ü—Ä–∏–º–µ—Ä: –±—ã–ª–æ <button onclick="addToCart(...)" ‚Üí —Å—Ç–∞–ª–æ –ø—Ä–æ—Å—Ç–æ <button class="add-to-cart"> -->

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <!-- ... -->
                <div class="hero-actions">
                    <button class="btn btn-primary btn-large" id="gotoCatalog">
                        <i class="fas fa-box-open"></i>
                        –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥
                    </button>
                    <button class="btn btn-secondary btn-large" id="openTelegramHero">
                        <i class="fab fa-telegram"></i>
                        –ù–∞–ø–∏—Å–∞—Ç—å –≤ Telegram
                    </button>
                </div>
                <!-- ... -->
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤</h2>
                <p class="section-subtitle">–®–∏—Ä–æ–∫–∏–π –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π —Ñ—É—Ä–Ω–∏—Ç—É—Ä—ã –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤</p>
            </div>
            <div class="categories-grid">
                <a href="#handles" class="category-card" data-category="handles">
                    <div class="category-image">
                        <img src="images/handles.jpg" alt="–ú–µ–±–µ–ª—å–Ω—ã–µ —Ä—É—á–∫–∏" onerror="this.src='https://via.placeholder.com/400x200/32CD32/000000?text=–ú–µ–±–µ–ª—å–Ω—ã–µ+–†—É—á–∫–∏'">
                    </div>
                    <div class="category-content">
                        <h3>–ú–µ–±–µ–ª—å–Ω—ã–µ —Ä—É—á–∫–∏</h3>
                        <p>–®–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä —Ä—É—á–µ–∫ –¥–ª—è –º–µ–±–µ–ª–∏ –≤—Å–µ—Ö —Å—Ç–∏–ª–µ–π –∏ —Ä–∞–∑–º–µ—Ä–æ–≤ –æ—Ç –≤–µ–¥—É—â–∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π</p>
                        <div class="category-link">
                            –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </a>
                <!-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ ... -->
                <a href="#hinges" class="category-card" data-category="hinges">
                    <div class="category-image">
                        <img src="images/hinges.jpg" alt="–ú–µ–±–µ–ª—å–Ω—ã–µ –ø–µ—Ç–ª–∏" onerror="this.src='https://via.placeholder.com/400x200/32CD32/000000?text=–ú–µ–±–µ–ª—å–Ω—ã–µ+–ü–µ—Ç–ª–∏'">
                    </div>
                    <div class="category-content">
                        <h3>–ú–µ–±–µ–ª—å–Ω—ã–µ –ø–µ—Ç–ª–∏</h3>
                        <p>–ß–µ—Ç—ã—Ä–µ—Ö—à–∞—Ä–Ω–∏—Ä–Ω—ã–µ –∏ —Å–∫—Ä—ã—Ç—ã–µ –ø–µ—Ç–ª–∏ –¥–ª—è –ª—é–±–æ–π –º–µ–±–µ–ª–∏ —Å —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∞–º–∏</p>
                        <div class="category-link">
                            –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </a>
                <a href="#systems" class="category-card" data-category="systems">
                    <div class="category-image">
                        <img src="images/drawers.jpg" alt="–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è" onerror="this.src='https://via.placeholder.com/400x200/32CD32/000000?text=–°–∏—Å—Ç–µ–º—ã+–•—Ä–∞–Ω–µ–Ω–∏—è'">
                    </div>
                    <div class="category-content">
                        <h3>–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è</h3>
                        <p>–ù–∞–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∏ –≤—ã–¥–≤–∏–∂–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —è—â–∏–∫–æ–≤ —Å –ø–ª–∞–≤–Ω—ã–º —Ö–æ–¥–æ–º</p>
                        <div class="category-link">
                            –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </a>
                <a href="#hardware" class="category-card" data-category="hardware">
                    <div class="category-image">
                        <img src="images/hardware.jpg" alt="–ö—Ä–µ–ø–µ–∂–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è" onerror="this.src='https://via.placeholder.com/400x200/32CD32/000000?text=–ö—Ä–µ–ø–µ–∂–Ω—ã–µ+–ò–∑–¥–µ–ª–∏—è'">
                    </div>
                    <div class="category-content">
                        <h3>–ö—Ä–µ–ø–µ–∂–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è</h3>
                        <p>–í–∏–Ω—Ç—ã, —à—É—Ä—É–ø—ã, —Å—Ç—è–∂–∫–∏ –∏ –º–µ—Ç–∏–∑—ã –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏ –º–µ–±–µ–ª–∏</p>
                        <div class="category-link">
                            –°–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–≤–∞—Ä—ã
                            <i class="fas fa-arrow-right"></i>
                        </div>
                    </div>
                </a>
            </div>
        </div>
    </section>

    <!-- Category Sections -->
    <section id="handles" class="section section-light" style="display: none;">
        <div class="container">
            <div class="section-header">
                <button class="btn btn-outline" data-action="back-to-categories" style="margin-bottom: 2rem;">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                </button>
                <h2 class="section-title">–ú–µ–±–µ–ª—å–Ω—ã–µ —Ä—É—á–∫–∏</h2>
                <p class="section-subtitle">–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä—É—á–∫–∏ –¥–ª—è –ª—é–±–æ–π –º–µ–±–µ–ª–∏</p>
            </div>
            <div class="products-grid" id="handlesProducts"></div>
        </div>
    </section>
    <!-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ü–∏–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ ... -->
    <section id="hinges" class="section section-light" style="display: none;">
        <div class="container">
            <div class="section-header">
                <button class="btn btn-outline" data-action="back-to-categories" style="margin-bottom: 2rem;">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                </button>
                <h2 class="section-title">–ú–µ–±–µ–ª—å–Ω—ã–µ –ø–µ—Ç–ª–∏</h2>
                <p class="section-subtitle">–ù–∞–¥–µ–∂–Ω—ã–µ –ø–µ—Ç–ª–∏ –¥–ª—è –º–µ–±–µ–ª—å–Ω—ã—Ö —Ñ–∞—Å–∞–¥–æ–≤</p>
            </div>
            <div class="products-grid" id="hingesProducts"></div>
        </div>
    </section>
    <section id="systems" class="section section-light" style="display: none;">
        <div class="container">
            <div class="section-header">
                <button class="btn btn-outline" data-action="back-to-categories" style="margin-bottom: 2rem;">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                </button>
                <h2 class="section-title">–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è</h2>
                <p class="section-subtitle">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞</p>
            </div>
            <div class="products-grid" id="systemsProducts"></div>
        </div>
    </section>
    <section id="hardware" class="section section-light" style="display: none;">
        <div class="container">
            <div class="section-header">
                <button class="btn btn-outline" data-action="back-to-categories" style="margin-bottom: 2rem;">
                    <i class="fas fa-arrow-left"></i>
                    –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                </button>
                <h2 class="section-title">–ö—Ä–µ–ø–µ–∂–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è</h2>
                <p class="section-subtitle">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫—Ä–µ–ø–µ–∂ –¥–ª—è —Å–±–æ—Ä–∫–∏ –º–µ–±–µ–ª–∏</p>
            </div>
            <div class="products-grid" id="hardwareProducts"></div>
        </div>
    </section>

    <!-- ... –æ—Å—Ç–∞–ª—å–Ω–æ–π HTML (About, Contacts, Footer) –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–ö–æ—Ä–∑–∏–Ω–∞</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div id="cartItems" class="cart-items"></div>
                <div class="cart-total">
                    <strong>–ò—Ç–æ–≥–æ: <span id="cartTotal">0</span> ‚ÇΩ</strong>
                </div>
            </div>
            <div class="modal-footer">
                <div class="cart-actions">
                    <button class="btn btn-outline" id="clearCart">
                        <i class="fas fa-trash"></i>
                        –û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
                    </button>
                </div>
                <div>
                    <button class="btn btn-secondary" id="continueShopping">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏</button>
                    <button class="btn btn-primary" id="checkout">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ... AI Assistant –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ... -->

    <script>
        const productsData = [
            // ... –≤–∞—à –º–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
            { id: 1, name: "–†—É—á–∫–∞ –º–µ–±–µ–ª—å–Ω–∞—è '–ü—Ä–µ—Å—Ç–∏–∂' –∞–ª—é–º–∏–Ω–∏–µ–≤–∞—è", price: 450, category: "handles", image: "images/handles.jpg", description: "–ê–ª—é–º–∏–Ω–∏–µ–≤–∞—è —Ä—É—á–∫–∞ —Å –º–∞—Ç–æ–≤—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º, 128–º–º. –î–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –º–µ–±–µ–ª–∏." },
            { id: 2, name: "–†—É—á–∫–∞-–∫–Ω–æ–± '–≠–ª–µ–≥–∞–Ω—Ç' —Ö—Ä–æ–º", price: 320, category: "handles", image: "images/handles.jpg", description: "–®–∞—Ä–æ–æ–±—Ä–∞–∑–Ω–∞—è —Ä—É—á–∫–∞, —Ö—Ä–æ–º –ø–æ–∫—Ä—ã—Ç–∏–µ, 32–º–º. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ." },
            // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ 14 —Ç–æ–≤–∞—Ä–æ–≤ ...
            { id: 16, name: "–ú–µ–±–µ–ª—å–Ω—ã–π —É–≥–æ–ª–æ–∫ —É—Å–∏–ª–µ–Ω–Ω—ã–π", price: 25, category: "hardware", image: "images/hardware.jpg", description: "–£—Å–∏–ª–µ–Ω–Ω—ã–π —É–≥–æ–ª–æ–∫ –¥–ª—è –∫—Ä–µ–ø–ª–µ–Ω–∏—è –ø–æ–ª–æ–∫. –ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å 50–∫–≥." }
        ];

        let cart = [];
        let productsLoaded = false; // ‚Üê –∫–ª—é—á–µ–≤–æ–π —Ñ–ª–∞–≥

        // === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
        function initApp() {
            if (!document.getElementById('cartButton')) {
                setTimeout(initApp, 50);
                return;
            }
            initCart();
            setupEventListeners();
            setupMobileMenu();
            if (!productsLoaded) {
                loadCategories();
                loadAllProducts();
                productsLoaded = true;
            }
            setupSearch();
        }

        function initCart() {
            const saved = localStorage.getItem('vegadar_cart');
            cart = saved ? JSON.parse(saved) : [];
            updateCartCount();
        }

        function saveCart() {
            localStorage.setItem('vegadar_cart', JSON.stringify(cart));
            updateCartCount();
        }

        function updateCartCount() {
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const el = document.querySelector('.cart-count');
            if (el) el.textContent = count;
        }

        // === –ó–ê–ì–†–£–ó–ö–ê –¢–û–í–ê–†–û–í ===
        function loadCategories() {
            // ... –≤–∞—à –∫–æ–¥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
        }

        function loadAllProducts() {
            ['handles', 'hinges', 'systems', 'hardware'].forEach(cat => {
                const container = document.getElementById(cat + 'Products');
                if (!container) return;
                const items = productsData.filter(p => p.category === cat);
                container.innerHTML = items.map(p => `
                    <div class="product-card" data-id="${p.id}" data-name="${p.name}" data-price="${p.price}" data-category="${p.category}">
                        <div class="product-image">
                            <img src="${p.image}" alt="${p.name}" onerror="this.src='https://via.placeholder.com/400x200/32CD32/000000?text=–ú–µ–±–µ–ª—å–Ω–∞—è+–§—É—Ä–Ω–∏—Ç—É—Ä–∞'">
                            <div class="product-badge">${getCategoryName(p.category)}</div>
                        </div>
                        <div class="product-content">
                            <h3>${p.name}</h3>
                            <p>${p.description}</p>
                            <div class="product-price">${p.price} ‚ÇΩ</div>
                            <div class="product-actions">
                                <button class="btn btn-primary add-to-cart">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                                <button class="btn btn-secondary order-product">–ó–∞–∫–∞–∑–∞—Ç—å</button>
                            </div>
                        </div>
                    </div>
                `).join('');
            });
        }

        function getCategoryName(cat) {
            const map = { handles: '–†—É—á–∫–∏', hinges: '–ü–µ—Ç–ª–∏', systems: '–°–∏—Å—Ç–µ–º—ã', hardware: '–ö—Ä–µ–ø–µ–∂' };
            return map[cat] || '–¢–æ–≤–∞—Ä';
        }

        // === –ö–û–†–ó–ò–ù–ê ===
        function addToCart(id, name, price) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.quantity++;
            } else {
                cart.push({ id, name, price, quantity: 1 });
            }
            saveCart();
            showNotification(`‚úÖ "${name}" –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
        }

        function removeFromCart(id) {
            cart = cart.filter(i => i.id !== id);
            saveCart();
            updateCartModal();
        }

        function updateQuantity(id, change) {
            const item = cart.find(i => i.id === id);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(id);
                } else {
                    saveCart();
                    updateCartModal();
                }
            }
        }

        function calculateTotal() {
            return cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        }

        function updateCartModal() {
            const itemsEl = document.getElementById('cartItems');
            const totalEl = document.getElementById('cartTotal');
            if (!itemsEl || !totalEl) return;

            if (cart.length === 0) {
                itemsEl.innerHTML = '<p class="empty-cart">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>';
            } else {
                itemsEl.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-price">${item.price} ‚ÇΩ √ó ${item.quantity}</div>
                        </div>
                        <div class="cart-item-quantity">
                            <button class="quantity-btn dec" data-id="${item.id}">-</button>
                            <span>${item.quantity}</span>
                            <button class="quantity-btn inc" data-id="${item.id}">+</button>
                        </div>
                        <button class="cart-item-remove" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `).join('');
            }
            totalEl.textContent = calculateTotal();
        }

        function processCheckout() {
            if (cart.length === 0) {
                showNotification('‚ùå –ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
                return;
            }
            const itemsText = cart.map(item => 
                `‚Ä¢ ${item.name} - ${item.quantity}—à—Ç. √ó ${item.price}‚ÇΩ = ${item.quantity * item.price}‚ÇΩ`
            ).join('\n');
            const total = calculateTotal();
            const message = `üõí –ó–ê–ö–ê–ó –° –°–ê–ô–¢–ê VEGADAR.RU\n${itemsText}\nüí∞ –ò–¢–û–ì–û: ${total}‚ÇΩ\nüìû –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∫–ª–∏–µ–Ω—Ç–æ–º.`;
            // –ò–°–ü–†–ê–í–õ–ï–ù–û: –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —á–∞—Ç
            const url = `https://t.me/+79624044323?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
            cart = [];
            saveCart();
            updateCartModal();
            showNotification('‚úÖ –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Telegram! –û–∂–∏–¥–∞–π—Ç–µ –∑–≤–æ–Ω–∫–∞.');
        }

        // === –ù–ê–í–ò–ì–ê–¶–ò–Ø ===
        function showCategories() {
            ['handles', 'hinges', 'systems', 'hardware'].forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
            document.getElementById('products').style.display = 'block';
            document.getElementById('products').scrollIntoView({ behavior: 'smooth' });
        }

        function showCategory(cat) {
            ['products', 'handles', 'hinges', 'systems', 'hardware'].forEach(id => {
                document.getElementById(id).style.display = 'none';
            });
            document.getElementById(cat).style.display = 'block';
            document.getElementById(cat).scrollIntoView({ behavior: 'smooth' });
        }

        function openTelegramWithMessage(msg) {
            const url = `https://t.me/+79624044323?text=${encodeURIComponent(msg)}`;
            window.open(url, '_blank');
        }

        // === –ü–û–ò–°–ö ===
        function setupSearch() {
            const input = document.getElementById('searchInput');
            const results = document.getElementById('searchResults');
            if (!input || !results) return;

            input.addEventListener('input', () => {
                const q = input.value.trim().toLowerCase();
                results.style.display = q.length < 2 ? 'none' : 'block';
                if (q.length < 2) return;

                const found = productsData.filter(p => 
                    p.name.toLowerCase().includes(q) || p.description.toLowerCase().includes(q)
                );

                results.innerHTML = found.length 
                    ? found.map(p => `<div class="search-result-item" data-category="${p.category}" data-id="${p.id}">
                        <div class="search-result-name">${p.name}</div>
                        <div class="search-result-price">${p.price} ‚ÇΩ</div>
                      </div>`)
                    : '<div class="no-results">–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
            });

            document.addEventListener('click', (e) => {
                if (!input.contains(e.target) && !results.contains(e.target)) {
                    results.style.display = 'none';
                }
            });
        }

        // === –ú–û–ë–ò–õ–¨–ù–û–ï –ú–ï–ù–Æ ===
        function setupMobileMenu() {
            const btn = document.getElementById('mobileMenuBtn');
            const menu = document.getElementById('navMenu');
            if (btn && menu) {
                btn.addEventListener('click', () => menu.classList.toggle('active'));
            }
        }

        // === –û–ë–†–ê–ë–û–¢–ö–ê –°–û–ë–´–¢–ò–ô (–î–ï–õ–ï–ì–ò–†–û–í–ê–ù–ò–ï) ===
        function setupEventListeners() {
            document.addEventListener('click', (e) => {
                // –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
                if (e.target.closest('.category-card')) {
                    const cat = e.target.closest('.category-card').dataset.category;
                    if (cat) showCategory(cat);
                }
                // –ù–∞–∑–∞–¥ –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
                if (e.target.closest('[data-action="back-to-categories"]')) {
                    showCategories();
                }
                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
                if (e.target.classList.contains('add-to-cart')) {
                    const card = e.target.closest('.product-card');
                    addToCart(+card.dataset.id, card.dataset.name, +card.dataset.price);
                }
                // –ë—ã—Å—Ç—Ä—ã–π –∑–∞–∫–∞–∑
                if (e.target.classList.contains('order-product')) {
                    const card = e.target.closest('.product-card');
                    openTelegramWithMessage(`–•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å: ${card.dataset.name} ‚Äî ${card.dataset.price}‚ÇΩ`);
                }
                // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
                if (e.target.classList.contains('cart-item-remove')) {
                    const id = +e.target.dataset.id;
                    removeFromCart(id);
                }
                // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
                if (e.target.classList.contains('quantity-btn')) {
                    const id = +e.target.dataset.id;
                    const change = e.target.classList.contains('inc') ? 1 : -1;
                    updateQuantity(id, change);
                }
                // –ü–æ–∏—Å–∫
                if (e.target.classList.contains('search-result-item')) {
                    const cat = e.target.dataset.category;
                    showCategory(cat);
                    document.getElementById('searchInput').value = '';
                    document.getElementById('searchResults').style.display = 'none';
                }
            });

            // –ö–Ω–æ–ø–∫–∏
            document.getElementById('gotoCatalog')?.addEventListener('click', showCategories);
            document.getElementById('openTelegramHero')?.addEventListener('click', () => 
                openTelegramWithMessage('–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –≤–æ–ø—Ä–æ—Å –ø–æ –º–µ–±–µ–ª—å–Ω–æ–π —Ñ—É—Ä–Ω–∏—Ç—É—Ä–µ.')
            );
            document.getElementById('cartButton')?.addEventListener('click', () => {
                updateCartModal();
                document.getElementById('cartModal').style.display = 'block';
            });
            document.querySelector('.close, #continueShopping')?.addEventListener('click', () => {
                document.getElementById('cartModal').style.display = 'none';
                showCategories(); // ‚Üê –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–∞—Ç–∞–ª–æ–≥
            });
            document.getElementById('clearCart')?.addEventListener('click', () => {
                cart = [];
                saveCart();
                updateCartModal();
                showNotification('üóëÔ∏è –ö–æ—Ä–∑–∏–Ω–∞ –æ—á–∏—â–µ–Ω–∞');
            });
            document.getElementById('checkout')?.addEventListener('click', processCheckout);

            // –§–æ—Ä–º–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏
            const form = document.getElementById('contactForm');
            if (form) {
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const name = document.getElementById('contactName').value;
                    const phone = document.getElementById('contactPhone').value;
                    const msg = document.getElementById('contactMessage').value || '‚Äî';
                    openTelegramWithMessage(`üìß –ó–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞:\n–ò–º—è: ${name}\n–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n–°–æ–æ–±—â–µ–Ω–∏–µ: ${msg}`);
                    form.reset();
                    showNotification('‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ!');
                });
            }
        }

        function showNotification(msg) {
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.textContent = msg;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 3000);
        }

        // === –ó–ê–ü–£–°–ö ===
        initApp();
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>